:_module-type: REFERENCE

ifdef::context[:parent-context: {context}]
[id='guardrails-detectors_{context}']

= Understanding detectors

[role='_abstract']

[[guardrails-detector-server-info]]
The Guardrails framework uses "detector" servers to contain guardrailing logic.
Any server that provides the link:https://foundation-model-stack.github.io/fms-guardrails-orchestrator/?urls.primaryName=Detector+API[IBM /detectors API] is compatible
with the Guardrails framework. The main endpoint for a detector server is the `/api/v1/text/contents`, and the payload looks like the following:


```
curl $ENDPOINT/api/v1/text/contents -d /
"{
  \"contents\": [
    \"Some message\"
  ],
  \"detector_params\": {}
}"
```

== Built-in Detector
The Guardrails framework provides a set of “built-in” detectors out-of-the-box, which provides a number of detection algorithms. The built-in detector currently provides the following algorithms:


`regex`::
* `us-social-security-number` - detect US social security numbers
* `credit-card` - detect credit card numbers
* `email` - detect email addresses
* `ipv4` - detect IPv4 addresses
* `ipv6` - detect IP6 addresses
* `us-phone-number` - detect US phone numbers
* `uk-post-code` - detect UK post codes
* `$CUSTOM_REGEX` - use a custom regex to define your own detector

`file_type`::
* `json` - detect valid JSON
* `xml` - detect valid XML
* `yaml` - detect valid YAML
* `json-with-schema:$SCHEMA` - detect whether the text content satisfies a provided JSON schema. To specify a schema, replace $SCHEMA with a JSON schema
* `xml-with-schema:$SCHEMA` - detect whether the text content satisfies a provided XML schema. To specify a schema, replace $SCHEMA with an XML Schema Definition (XSD)
* `yaml-with-schema:$SCHEMA` - detect  whether the text content satisfies a provided XML schema. To specify a schema, replace $SCHEMA with a JSON schema (not a YAML schema)

`custom`::
_Developer preview_
* Custom detectors defined via a `custom_detectors.py` file.
+
The detector algorithm can be chosen with `detector_params`, by first choosing the top-level taxonomy (e.g., `regex` or `file_type`) and then providing a list of the desired algorithms from within
that category. In the following example, both the `credit-card` and `email` algorithms are run against the provided message:

[source,json]
----
{
  "contents": [
    "Some message"
  ],
  "detector_params": {
    "regex": ["credit-card", "email"]
  }
}
----
