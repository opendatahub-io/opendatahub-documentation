:_module-type: PROCEDURE

[id='deploying-a-model-from-the-model-catalog_{context}']
= Deploying a model from the model catalog

[role='_abstract']
You can deploy models directly from the model catalog. 

[IMPORTANT]
====
The model catalog feature is not currently supported for disconnected environments.
====

ifdef::upstream,self-managed[]
[NOTE]
====
{productname-short} model serving deployments use the global cluster pull secret to pull models in ModelCar format from the catalog. To update your global pull secret, see link:https://docs.redhat.com/en/documentation/openshift_container_platform/{ocp-latest-version}/html/images/managing-images#images-update-global-pull-secret_using-image-pull-secrets[Updating the global cluster pull secret] in the {openshift-platform} documentation.
====
endif::[]
ifdef::cloud-service[]
{productname-short} model serving deployments use the global cluster pull secret to pull models in ModelCar format from the catalog. To update your global pull secret, see link:https://docs.redhat.com/en/documentation/red_hat_openshift_service_on_aws/4/html/images/managing-images#using-image-pull-secrets[Using image pull secrets] in the Red Hat OpenShift Service on AWS documentation, or link:https://docs.redhat.com/en/documentation/openshift_dedicated/4/html/authentication_and_authorization/understanding-and-creating-service-accounts#auto-generated-sa-token-secrets_understanding-service-accounts[Automatically generated image pull secrets] in the OpenShift Dedicated documentation.
endif::[]

.Prerequisites
* You have logged in to {productname-long}.
ifndef::upstream[]
* If you are using {productname-short} groups, you are part of the user group or admin group (for example, {oai-user-group} or {oai-admin-group}) in OpenShift.
endif::[]
ifdef::upstream[]
* If you are using {productname-short} groups, you are part of the user group or admin group (for example, {odh-user-group} or {odh-admin-group}) in OpenShift.
endif::[]
ifdef::upstream[]
* A cluster administrator has configured and enabled the model registry component in your {productname-short} deployment. For more information, see link:{odhdocshome}/working-with-model-registries/#configuring-the-model-registry-component_model-registry[Configuring the model registry component].
endif::[]
ifndef::upstream[]
* A cluster administrator has configured and enabled the model registry component in your {productname-short} deployment. For more information, see link:{rhoaidocshome}{default-format-url}/configuring_the_model_registry_component/configuring-the-model-registry-component_model-registry-config[Configuring the model registry component].
endif::[]
ifdef::upstream[]
* You have enabled the model catalog feature as described in link:{odhdocshome}/working-with-model-registries/#enabling-the-model-catalog_model-registry[Enabling the model catalog].
endif::[]
ifndef::upstream[]
* You have enabled the model catalog feature as described ine link:{rhoaidocshome}{default-format-url}/configuring_the_model_registry_component/enabling-the-model-catalog_model-registry-config[Enabling the model catalog].
endif::[]

.Procedure
. From the {productname-short} dashboard, click *Models* -> *Model catalog*.
. From the *{org-name} models* section, click the name of the model that you want to deploy. 
+
The model details page opens.
. Click *Deploy model*.
+
The *Deploy model* dialog opens.
. From the *Project* drop-down list, select a project in which to deploy your model.
+
[NOTE]
====
Models using an OCI storage location support deployment only to the single-model serving platform. Projects using the multi-model serving platform do not appear in the project list.
====
. In the *Model deployment* section:
.. Optional: In the *Model deployment name* field, enter a unique name for your model deployment. The *Model deployment name* is autofilled with a value that contains the model name by default. 
+
This is the name of the inference service created when the model is deployed.
.. Optional: Click *Edit resource name*, and then enter a specific resource name for the model deployment in the *Resource name* field. By default, the resource name will match the name of the model registry.
+
[IMPORTANT]
====
Resource names are what your resources are labeled as in OpenShift. Your resource name cannot exceed 253 characters, must consist of lowercase alphanumeric characters or '-', and must start and end with an alphanumeric character. Resource names are not editable after creation.

The resource name must not match the name of any other model deployment resource in your {openshift-platform} cluster.
====
.. From the *Serving runtime* list, select a model-serving runtime that is installed and enabled in your {productname-short} deployment.
.. From the *Model framework* list, select a framework for your model.
+
NOTE: The *Model framework* list shows only the frameworks that are supported by the model serving runtime that you specified when you deployed your model.
+
.. From the *Deployment mode* drop-down list, select a deployment mode for your model deployment:
* *Standard*: 
* *Advanced*:
.. In the *Number of model server replicas to deploy* field, specify a value.
.. From the *Model server size* list, select a value.
.. Optional: From the *Accelerator* list, select an accelerator. 
+
[IMPORTANT]
====
Ensure that appropriate tolerations are in place before adding an accelerator to your model server.
====
.. If you selected an accelerator in the preceding step, specify the number of accelerators to use.
..  In the *Model route* section, select the *Make deployed models available through an external route* checkbox to make your deployed models available to external clients.
.. In the *Token authentication* section, select the *Require token authentication* checkbox to require token authentication for your model server. To finish configuring token authentication, perform the following actions:
... In the *Service account name* field, enter a service account name for which the token will be generated. The generated token is created and displayed in the *Token secret* field when the model server is configured.
... To add an additional service account, click *Add a service account* and enter another service account name.
. In the *Source model location* section, select *Current URI* to deploy the selected model from the catalog.
<Do we need to cover the 'Exist/Create connection' options here, or should these not be used when deploying from the catalog?>
+
You can use OCI connections only to deploy models packaged as ModelCars. Deploying models packaged in different formats will result in failure.
. Optional: Customize the runtime parameters in the *Configuration parameters* section:
.. Modify the values in *Additional serving runtime arguments* to define how the deployed model behaves.
.. Modify the values in *Additional environment variables* to define variables in the model's environment.
. Click *Deploy*.

.Verification
* The model appears on the *Deployments* tab for the model version.

// [role="_additional-resources"]
// .Additional resources
// * TODO or delete

