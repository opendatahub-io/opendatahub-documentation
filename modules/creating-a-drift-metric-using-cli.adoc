:_module-type: PROCEDURE

[id='creating-a-drift-metric-using-cli_{context}']
= Creating a data drift metric by using the CLI

[role='_abstract']
You can use the OpenShift command-line interface (CLI) to create a data drift metric for a model.

.Prerequisites

* You are familiar with the specific data set schema and understand the names and meanings of the inputs and outputs.

* Your OpenShift cluster administrator added you as a user to the {openshift-platform} cluster and has installed the TrustyAI service for the data science project where the models are deployed.

* You set up TrustyAI for your data science project, as described in xref:setting-up-trustyai-for-your-project_monitor[Setting up TrustyAI for your project].

.Procedure

. In a terminal window, log in to the OpenShift cluster where {productname-short} is deployed.
+
----
oc login
----

. Set the `TRUSTY_ROUTE` variable to the external route for the TrustyAI service pod.
+
----
TRUSTY_ROUTE=https://$(oc get route/trustyai-service --template={{.spec.host}})
----

.  Optionally, get the full list of TrustyAI service endpoints and payloads.
+
----
curl -H "Authorization: Bearer $TOKEN" --location $TRUSTY_ROUTE/q/openapi
----

. Use `POST /metrics/drift/meanshift/request` to schedule a recurring drift monitoring metric with the following syntax and payload structure:
+
*Syntax*:
+
----
curl -k -H "Authorization: Bearer $TOKEN" -X POST --location $TRUSTY_ROUTE/metrics/drift/meanshift/request \
 --header 'Content-Type: application/json' \
 --data <payload>
----
+
*Payload structure*:

`modelId`:: The name of the model to monitor.
`referenceTag`:: The data to use as the reference distribution.

For example:

----
curl -k -H "Authorization: Bearer $TOKEN" -X POST --location $TRUSTY_ROUTE/metrics/drift/meanshift/request \
     --header 'Content-Type: application/json' \
     --data "{
                 \"modelId\": \"gaussian-credit-model\",
                 \"referenceTag\": \"TRAINING\"
             }"
----

//.Verification