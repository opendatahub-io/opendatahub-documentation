:_module-type: REFERENCE

[id="about-llama-stack-search-types_{context}"]
= About Llama stack search types

[role='_abstract']
Llama Stack supports keyword, vector, and hybrid search modes for retrieving context in retrieval-augmented generation (RAG) workloads. Each mode offers different tradeoffs in precision, recall, semantic depth, and computational cost.

== Supported search modes

=== Keyword search
Keyword search applies lexical matching techniques, such as TF-IDF or BM25, to locate documents that contain exact or near-exact query terms. This approach is effective when precise term-matching is required, such as searching for identifiers, names, or regulatory terms.

.Keyword search example
[source,python]
----
query_result = client.vector_io.query(
    vector_store_id=vector_store_id,
    query="FRBNY",
    params={
        "mode": "keyword",
        "max_chunks": 3,
        "score_threshold": 0.7,
    },
)

print(query_result)
----

For more information about keyword-based retrieval, see link:https://www.researchgate.net/publication/220613776_The_Probabilistic_Relevance_Framework_BM25_and_Beyond[The Probabilistic Relevance Framework: BM25 and Beyond].

---

=== Vector search

Vector search encodes documents and queries as dense numerical vectors, known as embeddings, and measures similarity using metrics such as cosine similarity or inner product. This approach captures semantic meaning and supports contextual matching beyond exact word overlap.

.Vector search example
[source,python]
----
query_result = client.vector_io.query(
    vector_store_id=vector_store_id,
    query="FRBNY",
    params={
        "mode": "vector",
        "max_chunks": 3,
        "score_threshold": 0.7,
    },
)

print(query_result)
----

For more information, see link:https://ieeexplore.ieee.org/document/8733051[Billion-scale similarity search with GPUs].

---

=== Hybrid search
Hybrid search combines keyword and vector-based retrieval techniques, typically by blending lexical and semantic relevance scores. This approach aims to balance exact term matching with semantic similarity.


.Hybrid search example
[source,python]
----
query_result = client.vector_io.query(
    vector_store_id=vector_store_id,
    query="FRBNY",
    params={
        "mode": "hybrid",
        "max_chunks": 3,
        "score_threshold": 0.7,
    },
)

print(query_result)
----

For more information, see link:https://arxiv.org/html/2410.20381v1[Sparse, Dense, and Hybrid Retrieval for Answer Ranking].

---

[NOTE]
====
Search mode availability depends on the selected vector store provider and its configured capabilities.

Not all providers support every search mode. For example, some providers might support vector search only, while keyword or hybrid search might be unavailable or return empty results. Always verify supported search modes for your chosen vector store provider.
====

