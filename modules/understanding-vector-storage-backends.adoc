:_module-type: CONCEPT

[id="understanding-vector-metadata-storage-backends_{context}"]
= Understanding vector metadata storage backends

[role="_abstract"]
In {productname-short}, vector metadata storage backends persist non-vector information that is associated with vector embeddings, such as document identifiers, source locations, and timestamps. Metadata storage works alongside a vector storage provider to support retrieval augmented generation workflows in {productname-short}.

Vector-based workloads in {productname-short} typically require more than similarity search. In addition to storing and querying embeddings, applications often need to persist metadata such as document identifiers, source locations, labels, or timestamps. This metadata is stored in a dedicated backend that complements the vector database.

== Role of metadata storage in vector-based workloads

Vector indexes used for similarity search and retrieval augmented generation are optimized for numerical operations on embeddings. Metadata access is handled separately to support richer application behavior.

To support this separation, vector storage implementations in {productname-short} typically use:

* A vector index to store and search embedding data.
* A metadata storage backend to persist mappings between vector identifiers and metadata records.
* Application logic that resolves metadata after vector search results are returned.

This design allows metadata storage to be scaled, secured, and managed independently from vector indexing.

== Vector storage providers and metadata storage backends are distinct

In {productname-short}, a vector storage provider stores embeddings and performs similarity search. A metadata storage backend persists non-vector records associated with those embeddings. These components have different configuration and lifecycle requirements.

For example, pgvector is a vector storage provider that uses PostgreSQL with the pgvector extension to store and search embeddings. The same PostgreSQL instance can also serve as the metadata storage backend, but these are configured separately and serve distinct purposes.

== Supported metadata storage backends in {productname-short}

PostgreSQL is the required metadata storage backend for all {productname-short} deployments, regardless of the selected vector storage provider.

[IMPORTANT]
====
Starting with {productname-short} 3.2, PostgreSQL is required for all deployments of Llama Stack metadata storage.

Provision a PostgreSQL instance version 14 or later for your deployment.

If validation errors occur, confirm that the deployed Llama Stack image version matches the configuration schema referenced by your `run.yaml`.
====

== PostgreSQL for metadata storage

PostgreSQL is a network-accessible relational database that provides durable and centralized metadata storage for {productname-short} workloads.

When used as a metadata storage backend in {productname-short}, PostgreSQL provides:

* Persistent metadata across pod restarts and rescheduling.
* Centralized storage shared across workloads.
* Improved concurrency for multi-user and multi-application access.
* Alignment with enterprise operational practices such as backup and monitoring.

== Choosing a metadata storage backend

PostgreSQL is the required metadata storage backend for {productname-short} deployments. Provision a PostgreSQL instance version 14 or later for your deployment.

[NOTE]
====
PostgreSQL serves as the metadata storage backend for all deployments, including development, testing, and production environments.
====