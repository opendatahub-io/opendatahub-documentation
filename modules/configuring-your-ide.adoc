:_module-type: PROCEDURE

[id="configuring-your-ide_{context}"]
= Configuring your IDE

[role='_abstract']
You can configure some notebook workbenches to get the most out of your data science work.

== Configuring VS Code Server

Incorporating standard database clients into your VS Code Server environment can streamline your workflow, offering a seamless interface for managing databases. You can incorporate different Database Management System (DBMS) clients into your Code Server workbench through built-in VS Code extensions or by creating a custom notebook image using a Dockerfile.

=== Incorporating DBMS clients using VS Code extensions

.Prerequisites

* You have logged in to {productname-long}.
ifndef::upstream[]
* If you use specialized {productname-short} groups, you are part of the user group or admin group (for example, {oai-user-group} or {oai-admin-group}) in OpenShift.
endif::[]
ifdef::upstream[]
* If you use specialized {productname-short} groups, you are part of the user group or admin group (for example, {odh-user-group} or {odh-admin-group}) in OpenShift.
endif::[]
* You have created a data science project that has a Code Server workbench.

.Procedure

. From the {productname-short} dashboard, click *Data Science Projects*.
+
The *Data science projects* page opens.
. Click the name of the project containing the Code Server workbench you want to start.
+
The *Details* page for the project opens.
. Click the toggle in the *Status* column for the relevant workbench to start a workbench that is not running.
+
The status of the workbench that you started changes from *Stopped* to *Running*. 
. After the workbench has started, click *Open* to open the workbench notebook.
. In the Activity Bar, click the Extensions icon. (image:images/vscode-extensions-icon.png[The Extensions icon])
. Search for the name of the extension you want to install. 
. Click *Install* to add the extension to your VS Code Server environment.
+ 
The extension you installed appears in the *Browser - Installed* list on the *Extensions* panel.

==== Extensions

The following list describes some available third-party extensions that you can consider installing.

MongoDB for VS Code::
MongoDB for VS Code lets you connect to MongoDB and Atlas directly from your VS Code Server environment. Explore databases and collections, inspect schemas, and prototype queries and aggregations using the integrated playgrounds.

link:https://marketplace.visualstudio.com/items?itemName=mongodb.mongodb-vscode[See in Visual Studio Marketplace]

MySQL Shell for VS Code::
This extension provides a MySQL Shell for VS Code, enhancing your ability to manage MySQL databases within the VS Code Server environment.

link:https://marketplace.visualstudio.com/items?itemName=Oracle.mysql-shell-for-vs-code[See in Visual Studio Marketplace]

SQL Server (MSSQL)::
Connect to SQL Server with this extension and perform database tasks directly from your VS Code Server environment.

link:https://marketplace.visualstudio.com/items?itemName=ms-mssql.mssql[See in Visual Studio Marketplace]

PostgreSQL::
This extension facilitates direct interaction with PostgreSQL databases, allowing you to navigate, query, and manage your PostgreSQL instances efficiently.

link:https://marketplace.visualstudio.com/items?itemName=ms-ossdata.vscode-postgresql[See in Visual Studio Marketplace]

SQLTools::
SQLTools simplifies database connections and enhances data management and query execution, supporting a variety of commonly used databases.

link:https://marketplace.visualstudio.com/items?itemName=mtxr.sqltools[See in Visual Studio Marketplace]

Database Client::
This extension serves as a database manager for MySQL/MariaDB, PostgreSQL, SQLite, Redis, and ElasticSearch. It provides a unified interface for managing diverse databases within the VS Code Server environment.

link:https://marketplace.visualstudio.com/items?itemName=cweijan.vscode-database-client2[See in Visual Studio Marketplace]

=== Incorporating DBMS clients using a custom image

Custom notebook images are useful when working with containerized environments, especially when you need specific libraries, OS packages, or applications that are not available in base images. Follow these steps to create a custom notebook image with Database Management System (DBMS) clients for MongoDB, MSSQL, and PostgreSQL using a Dockerfile.

.Prerequisites

* You have logged in to {productname-long}.
ifndef::upstream[]
* If you use specialized {productname-short} groups, you are part of the user group or admin group (for example, {oai-user-group} or {oai-admin-group}) in OpenShift.
endif::[]
ifdef::upstream[]
* If you use specialized {productname-short} groups, you are part of the user group or admin group (for example, {odh-user-group} or {odh-admin-group}) in OpenShift.
endif::[]
* You have created a data science project that has a Code Server workbench.
* You have installed Docker on your system.

.Procedure

. Clone the Open Data Hub *notebooks* repository:
+
----
git clone git@github.com:opendatahub-io/notebooks.git
----

. From your local version of the repository, go to the `codeserver` folder and create a new folder for your custom image. For example, `ubi9-python-3.9-db-clients`. 
. Inside this folder, create a Dockerfile with the following contents:
+
----
# The base image is auto-assigned by the make recipe on the next step. In this case, this is your Code Server notebook.

ARG BASE_IMAGE
FROM ${BASE_IMAGE}

WORKDIR /opt/app-root/bin

# Install OS packages as root
USER root

# Install necessary OS packages
RUN dnf install -y unixODBC postgresql

# Install MongoDB Client
COPY mongodb-org-6.0.repo-x86_64 /etc/yum.repos.d/mongodb-org-6.0.repo
RUN dnf install -y mongocli

# Install MSSQL Client
COPY mssql-2022.repo-x86_64 /etc/yum.repos.d/mssql-2022.repo
RUN ACCEPT_EULA=Y dnf install -y mssql-tools18 unixODBC-devel
ENV PATH="$PATH:/opt/mssql-tools18/bin"

# Switch back to default user
USER 1001

WORKDIR /opt/app-root/src
----

. Create two RPM files, `mongodb-org-6.0.repo-x86_64` and `mssql-2022.repo-x86_64`, with the following contents, in the folder you created for your custom image.
+
*`mongodb-org-6.0.repo-x86_64`:*

+
----
[mongodb-org-6.0]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/9/mongodb-org/6.0/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-6.0.asc
----

+
*`mssql-2022.repo-x86_64`:*

+
----
[packages-microsoft-com-prod]
name=packages-microsoft-com-prod
baseurl=https://packages.microsoft.com/rhel/9.0/prod/
enabled=1
gpgcheck=1
gpgkey=https://packages.microsoft.com/keys/microsoft.asc
----

. To streamline the build and push process, update your local version of the link:https://github.com/opendatahub-io/notebooks/blob/main/Makefile[makefile] with a new recipe:
+
----
.PHONY: codeserver-ubi9-python-3.9-db-clients
codeserver-ubi9-python-3.9-db-clients: codeserver-ubi9-python-3.9
    $(call image,$@,codeserver/ubi9-python-3.9-db-clients,$<)
----

. Run the following command to build and push the image:
+
Replace `${YOUR_USERNAME}` with your username. You can replace `quay.io` with any valid registry.

+
----
make codeserver-ubi9-python-3.9-db-clients -e IMAGE_REGISTRY=quay.io/${YOUR_USERNAME}/workbench-images
----

. After pushing the custom image, from the {productname-short} dashboard, go to *Settings* -> *Notebook image settings* -> *Import new image*.
. Click *Import new image*.
+
The *Import Notebook images* dialog appears.
. In the *Image location* field, enter the URL of the repository containing your custom notebook image. For example: `quay.io/my-repo/my-image:tag`.
. In the *Name* field, enter a name for the notebook image.
. In the *Description* field, enter a description for the notebook image.
. Click *Import*.
+
The notebook image that you imported appears in the table on the *Notebook image settings* page.
. Create or open a data science project, create a new workbench, and select the custom image from the *Image selection* drop-down list.
. Open a new terminal inside your Code Server workbench and run the following command to confirm that the database clients installed successfully:
+
----
yum list installed | grep -E 'mssql|mongo|postgresql'
----

+
A list of installed packages related to MongoDB, MSSQL, and PostgreSQL should appear.

Example::
https://github.com/atheo89/notebooks/tree/add-db-clients-example/codeserver/ubi9-python-3.9-plus