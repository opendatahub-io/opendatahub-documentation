:_module-type: PROCEDURE

[id="configuring-your-ide_{context}"]
= Configuring your IDE

[role='_abstract']
You can configure some notebook workbenches to get the most out of your data science work.

== Configuring your code-server workbench
Incorporating standard database clients into your code-server workbench can streamline your workflow, offering a seamless interface for managing databases. You can incorporate different Database Management System (DBMS) clients into your code-server workbench through built-in extensions or by creating a custom notebook image using a Dockerfile. 

For more information on code-server, see link:https://github.com/coder/code-server[code-server in GitHub].

=== Incorporating DBMS clients using extensions

.Prerequisites

* You have logged in to {productname-long}.
ifndef::upstream[]
* If you use specialized {productname-short} groups, you are part of the user group or admin group (for example, {oai-user-group} or {oai-admin-group}) in OpenShift.
endif::[]
ifdef::upstream[]
* If you use specialized {productname-short} groups, you are part of the user group or admin group (for example, {odh-user-group} or {odh-admin-group}) in OpenShift.
endif::[]
* You have created a data science project that has a code-server workbench.

.Procedure

. From the {productname-short} dashboard, click *Data Science Projects*.
+
The *Data science projects* page opens.
. Click the name of the project containing the code-server workbench you want to start.
+
The *Details* page for the project opens.
. Click the toggle in the *Status* column for the relevant workbench to start a workbench that is not running.
+
The status of the workbench that you started changes from *Stopped* to *Running*. 
. After the workbench has started, click *Open* to open the workbench notebook.
. In the Activity Bar, click the Extensions icon. (image:images/codeserver-extensions-icon.png[The Extensions icon])
. Search for the name of the extension you want to install. 
. Click *Install* to add the extension to your code-server environment.
+ 
The extension you installed appears in the *Browser - Installed* list on the *Extensions* panel.

==== Extensions

See link:https://marketplace.visualstudio.com/vscode[Visual Studio Marketplace] for available third-party extensions that you can consider installing.

=== Incorporating DBMS clients using a custom image

Custom notebook images are useful when working with containerized environments, especially when you need specific libraries, OS packages, or applications that are not available in base images. Follow these steps to create a custom notebook image with Database Management System (DBMS) clients for MongoDB, MSSQL, and PostgreSQL using a Dockerfile.

.Prerequisites

* You have logged in to {productname-long}.
ifndef::upstream[]
* If you use specialized {productname-short} groups, you are part of the user group or admin group (for example, {oai-user-group} or {oai-admin-group}) in OpenShift.
endif::[]
ifdef::upstream[]
* If you use specialized {productname-short} groups, you are part of the user group or admin group (for example, {odh-user-group} or {odh-admin-group}) in OpenShift.
endif::[]
* You have created a data science project that has a code-server workbench.
* You have installed Docker on your system.

.Procedure

. Clone the Open Data Hub *notebooks* repository:
+
----
git clone git@github.com:red-hat-data-services/notebooks.git
----

. From your local version of the repository, go to the `codeserver` folder and create a new folder for your custom image. For example, `ubi9-python-3.9-db-clients`. 
. Inside this folder, create a Dockerfile with the following contents:
+
----
# The base image is auto-assigned by the make recipe on the next step. In this case, this is your code-server notebook.

ARG BASE_IMAGE
FROM ${BASE_IMAGE}

WORKDIR /opt/app-root/bin

# Install OS packages as root
USER root

# Install necessary OS packages
RUN dnf install -y unixODBC postgresql

# Install MongoDB Client
COPY mongodb-org-6.0.repo-x86_64 /etc/yum.repos.d/mongodb-org-6.0.repo
RUN dnf install -y mongocli

# Install MSSQL Client
COPY mssql-2022.repo-x86_64 /etc/yum.repos.d/mssql-2022.repo
RUN ACCEPT_EULA=Y dnf install -y mssql-tools18 unixODBC-devel
ENV PATH="$PATH:/opt/mssql-tools18/bin"

# Switch back to default user
USER 1001

WORKDIR /opt/app-root/src
----

. Create two text files, `mongodb-org-6.0.repo-x86_64` and `mssql-2022.repo-x86_64`, with the following contents, in the folder you created for your custom image.
+
*`mongodb-org-6.0.repo-x86_64`:*

+
----
[mongodb-org-6.0]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/9/mongodb-org/6.0/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-6.0.asc
----

+
*`mssql-2022.repo-x86_64`:*

+
----
[packages-microsoft-com-prod]
name=packages-microsoft-com-prod
baseurl=https://packages.microsoft.com/rhel/9.0/prod/
enabled=1
gpgcheck=1
gpgkey=https://packages.microsoft.com/keys/microsoft.asc
----

. To streamline the build and push process, update your local version of the `Makefile` with a new recipe:
+
----
.PHONY: codeserver-ubi9-python-3.9-db-clients
codeserver-ubi9-python-3.9-db-clients: codeserver-ubi9-python-3.9
    $(call image,$@,codeserver/ubi9-python-3.9-db-clients,$<)
----

+
See an link:https://github.com/red-hat-data-services/notebooks/blob/inject-bd-clients-example/Makefile[example makefile in GitHub].

. Run the following command to build and push the image:
+
Replace `${YOUR_USERNAME}` with your username or the name of a Quay organization that contains an existing `workbench-images` repository. You can also replace `quay.io` with any valid registry.

+
----
make codeserver-ubi9-python-3.9-db-clients -e IMAGE_REGISTRY=quay.io/${YOUR_USERNAME}/workbench-images
----

. After pushing the custom image, from the {productname-short} dashboard, go to *Settings* -> *Notebook image settings* -> *Import new image*.
. Click *Import new image*.
+
The *Import Notebook images* dialog opens.
. In the *Image location* field, enter the URL of the repository containing your custom notebook image. For example: `quay.io/my-repo/my-image:tag`.
. In the *Name* field, enter a name for the notebook image.
. In the *Description* field, enter a description for the notebook image.
. Click *Import*.
+
The notebook image that you imported appears in the table on the *Notebook image settings* page.
. Create or open a data science project, and then create a new workbench and select the custom image from the *Image selection* drop-down list.

.Verification
. Open a new terminal inside your code-server workbench and run the following command to confirm that the database clients installed successfully:
+
----
dnf list installed | grep -E 'mssql|mongo|postgresql'
----

+
A list of installed packages related to MongoDB, MSSQL, and PostgreSQL appear.

See an link:https://github.com/red-hat-data-services/notebooks/commit/fc556136b141d579e67600fb8af48fdbcc92effc[example makefile and custom image folder in GitHub] for reference.
